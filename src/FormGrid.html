{{#each rows as row}}
<Row>
    {{#each row.columns as col}}
        {{#if col.subtitle}}
            <div class="subtitle">{{col.subtitle}}</div>
        {{else}}
            <FormCol bind:source="item" settings="{{col}}" :edit />
        {{/if}}
    {{/each}}
</Row>
{{/each}} 

<script>
import FormCol from './FormCol.html';
import Row from './Row.html';

export default {
    data() {
        return {
            edit: true,
            item: {},
            rows: [],
            columns: [],
        }
    },
    components:{
        Row,
        FormCol
    },
    computed:{
        rows: (columns) => {                
            const maxRowNum = Math.max.apply(Math, columns.map(o => o.row))
            const rows = [];
            for (let i = 0; i <= maxRowNum; i++) {
                rows.push({ columns: [] });
            }
            for (let i = 0; i < columns.length; i++) {
                rows[columns[i].row].columns.push(columns[i]);
            }
            return rows;
        },
    },
}
</script>

<style>
    .subtitle {
        margin-top: 0.5rem; 
        margin-left: 1rem; 
        font-size: 1rem;
        font-weight: 600;
        text-decoration: underline;
        text-transform: uppercase;
    }
</style>