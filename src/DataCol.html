{{#if edit}}
    <:Component { fieldtype } {{...settings}} bind:value="source[settings.field]" on:change on:click />
{{elseif displayable}}
    {{ source[settings.field] }}
{{/if}}

<script>
    import { TextInput, NumberInput, SelectInput, CurrencyInput, MaskedInput, CheckboxInput, ActionButton } from './inputs';

    export default {
        data(){
            return {
                source: {},
            }
        },
        computed:{
            displayable: (source, settings) => {
                return source && (source.hasOwnProperty(settings.field) && source[settings.field] != null);
            },
            fieldtype: settings => {
                let ft = TextInput;
                if (settings.component) {
                    switch (settings.component.toLowerCase()) {
                        case 'text':
                            ft = TextInput;
                            break;
                        case 'number':
                            ft = NumberInput;
                            break;    
                        case 'masked':
                            ft = Masked;
                            break;
                        case 'currency':
                            ft = DatePicker;
                            break;
                        case 'select':
                            ft = SelectInput;
                            break;
                        case 'checkbox':
                            ft = CheckboxInput;
                            break;
                        case 'action':
                            ft = ActionButton;
                            break;
                    }
                }
                return ft;
            }
        }
    }
</script>
    