{{#if edit || settings.action}}
    <:Component { fieldtype } {{...settings}} bind:value="source[settings.field]" on:change on:click />
{{else}}
    {{ collect(source, settings.field) }}
{{/if}}

<script>
    import { TextInput, NumberInput, SelectInput, CurrencyInput, MaskedInput, CheckboxInput, ActionButton } from './inputs';

    function collect(obj, field) {
        if (typeof(field) === 'function')
            return field(obj);
        else if (typeof(field) === 'string')
            return obj[field];
        else
            return undefined;
    }

    export default {
        data(){
            return {
                source: {},
            }
        },
        helpers: {
            collect
        },
        computed:{
            fieldtype: settings => {
                let ft = TextInput;
                if (settings.component) {
                    switch (settings.component.toLowerCase()) {
                        case 'text':
                            ft = TextInput;
                            break;
                        case 'number':
                            ft = NumberInput;
                            break;    
                        case 'masked':
                            ft = Masked;
                            break;
                        case 'currency':
                            ft = DatePicker;
                            break;
                        case 'select':
                            ft = SelectInput;
                            break;
                        case 'checkbox':
                            ft = CurrencyInput;
                            break;
                        case 'action':
                            ft = ActionButton;
                            break;
                    }
                }
                return ft;
            }
        }
    }
</script>
    